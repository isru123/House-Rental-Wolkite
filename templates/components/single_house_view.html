{% extends 'base/base.html' %}
{% load crispy_forms_tags %}
{% load static %}
{% comment %} {% load filters %}  {% endcomment %}
{% load humanize %}

{% block 'body' %}




{% include 'includes/showcase_section.html' %}



<!-- Breadcrumb -->
<section id="bc" class="mt-3">
  <div class="container">
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
         <a href="{% url 'home' %}">{{ _("Home") }}</a>
        </li>
        <li class="breadcrumb-item">
          <a href="{% url 'master' %}">{{ _("Listings") }}</a>
        </li>
        <li class="breadcrumb-item active">{{ listing.house_kind }}</li>
      </ol>
    </nav>
  </div>
</section>

<!-- Alerts -->
{% include 'includes/_alerts.html' %}

<!-- Listing -->
<section id="listing" class="py-4">
  <div class="container">

    <div class="row col-12 px-0">
      <div class="col-8">
        <a href="{% url 'master' %}" class="btn btn-light mb-4">{{ _("Back To Listings") }}</a>
      </div>
      <div class="col-2 text-right mr-0 pr-0">

	{% if user.is_authenticated %}
          {% if listing.seller.user == request.user %}
          
        <a href="{% url 'edit_listing'   id=listing.id %}" target="_blank"
          class="btn btn-primary text-white mr-2 ">
          Edit
        </a>
	{% endif %}
	{% endif%}
      </div>
    </div>

    <div class="row">
      <div class="col-md-9">
        <!-- Home Main Image -->
        {% for image in listing.image.all %}
        <img class="bd-placeholder-img card-img-top" style="width:800px; height:450px"
         src="{{ image.image1.url }}" class="img-main img-fluid mb-3">
          {% endfor %} 
        <!-- Thumbnails -->
        <br>
        <br>
        <br>
        <div class="row thumbs listing-second-title">
          {% for img in listing.image.all %}
          <div class="row">
              <div class="col-4">
                <img style="width:300px;height:200px;" src="{{ img.image2.url }}" alt="" class="img-fluid img-inline-listing">
              </div>
              <div class="col-4">
                <img style="width:300px;height:200px;" src="{{ img.image3.url }}" alt="" class="img-fluid img-inline-listing">
              </div>
              <div class="col-4">
                <img style="width:300px;height:200px;" src="{{ img.image1.url }}" alt="" class="img-fluid img-inline-listing">
              </div>
            {% comment %} <a href="{{ img.image2.url }}" data-lightbox="home-images">
              <img src="{{ img.image3.url }}" alt="" class="img-fluid img-inline-listing">
            </a> {% endcomment %}
            {% comment %} class="col-6 col-sm-4 col-md-4 col-lg-3 col-xl-2" {% endcomment %}
          </div>
          <br>
          {% endfor%}
        </div>




        <!-- Fields -->
        <div class="row fields">
          <div class="col-12 ">

            <h2 class="listing-second-title mt-3 mb-3">
              {{ listing.house_kind }}
            </h2>

            <span class="mb-3">
              <i class="fas fa-map-marker text-secondary mb-5"></i>
              {{ listing.address }}
            </span>

          </div>


          <!-- Description -->
          <div class="col-md-12 mb-5">
            <h5 class="mb-3">{{ _("Description") }}</h5>
            <p class="mb-2">{{ listing.description }}</p>

            {% if listing.protected %}
            <small class="uppercase">
              {{ _("This object is listed") }}
            </small>

            {% else %}

            <small>
              {{ _("This object is not listed") }}
            </small>

            {% endif %}

          </div>


          <div class="col-md-6 p-0">
            <ul class="list-group list-group-flush">


              <li class="list-group-item">
                <i class="fas fa-bed text-secondary pr-2"></i> {{ _("Bedrooms") }}:
                <span class="float-right">{{ listing.bedrooms }}</span>
              </li>

              <li class="list-group-item">
                <i class="fas fa-bath text-secondary pr-2"></i> {{ _("Bathrooms") }}:
                <span class="float-right">{{ listing.bathrooms }}</span>
              </li>


              <li class="list-group-item">
                <i class="fas fa-arrows-alt-v text-secondary pr-2"></i> {{ _("Ceiling height") }}:
                <span class="float-right">{{ listing.ceiling_height }} {{ _("m") }}
                </span>
              </li>
              
              <li class="list-group-item">
                <i class="fas fa-calendar text-secondary pr-2"></i> {{ _("Available From") }}:
                <span class="float-right">{{ listing.available_start }}</span>
              </li>
             


            </ul>
          </div>


          <div class="col-md-6 p-0">
            <ul class="list-group list-group-flush">

              <li class="list-group-item">
                <i class="fas fa-money-bill-alt text-secondary pr-2"></i> {{ _("Price") }}
                <span class="float-right">{{ listing.price | intcomma }} €</span>
              </li>

              <li class="list-group-item">
                <i class="fas fa-th-large text-secondary pr-2"></i> {{ _("Square Feet") }}:
                <span class="float-right">{{ listing.sqft }} {{ _("m²") }}

                </span>
              </li>
             
              <li class="list-group-item">
                <i class="fas fa-calendar text-secondary pr-2"></i> {{ _("Free from") }}:
                <span class="float-right">{{ listing.free_date }}</span>
              </li>
             
              <li class="list-group-item">
                <i class="fas fa-calendar text-secondary pr-2"></i> {{ _("Available To") }}:
                <span class="float-right">{{ listing.available_end }}</span>
              </li>


            </ul>

          </div>


          <div class="col-12 px-3 my-5">
            <div id="map" style="width:100%;height:400px;"></div>
          </div>

        </div>

        <div>
          <small>{{ _("Object from the ") }}
            <span>{{ listing.created|date:"d M Y" }}</span>

          </small>
        </div>

      </div>


      {% include 'includes/contact-box.html' %}

    </div>
  </div>
</section>

{% comment %} 
<script>
  function myMap() {
    const myLatLng = {
      lat: {{ listing.get_coordinates.latitude|stringformat:"f"}},
      lng: {{ listing.get_coordinates.longitude|stringformat:"f" }}
    };
  var mapProp = { center: new google.maps.LatLng(myLatLng), zoom: 14 };
  var map = new google.maps.Map(document.getElementById("map"), mapProp);
  const marker = new google.maps.Marker({
    position: myLatLng,
    map,
    title: "{{ listing.get_coordinates.address }}"
  });
  }

</script>

<script
  src="https://maps.googleapis.com/maps/api/js?key=[YOUR-API-KEY]&callback=myMap"></script> {% endcomment %}



{% endblock %}

{% block 'footer' %}
{% endblock %}




